define(["util"],function(util){var Animator=function(element,animation,duration,callback){var animation=animation.match(/((slide(out|in))(top|bottom|left|right)|fade(in|out))/i);this.callback=callback;if(animation===null)throw new Error("Invalid animation option.");var prefix=util.browser.hasSupport.cssTransitions;this.directions={top:"0px, -1000px",bottom:"0px, 1000px",left:"-1000px, 0px",right:"1000px, 0px"},/slidein/i.test(animation[2])?this.slideIn(element,prefix,animation[4],duration):/slideout/i.test(animation[2])?this.slideOut(element,prefix,animation[4],duration):/fadein/i.test(animation[0])?this.fadeIn(element,prefix,duration):/fadeout/i.test(animation[0])&&this.fadeOut(element,prefix,duration)};return Animator.prototype.slideIn=function(element,prefix,direction,duration){document.body.style.overflow="hidden";var self=this;element.style[prefix+"Transform"]="translate("+this.directions[direction.toLowerCase()]+")",element.style[prefix+"Transition"]="-"+prefix.toLowerCase()+"-transform "+(duration||.3)+"s linear",setTimeout(function(){element.style[prefix+"Transform"]=null,setTimeout(function(){typeof self.callback=="function"&&self.callback(),element.style[prefix+"Transition"]=document.body.style.overflow=null},duration*1e3||300)},100)},Animator.prototype.slideOut=function(element,prefix,direction,duration){var self=this;document.body.style.overflow="hidden",element.style[prefix+"Transition"]="-"+prefix.toLowerCase()+"-transform "+(duration||.3)+"s linear",setTimeout(function(){element.style[prefix+"Transform"]="translate("+self.directions[direction.toLowerCase()]+")",setTimeout(function(){typeof self.callback=="function"&&self.callback(),element.style[prefix+"Transition"]=element.style[prefix+"Transform"]=null},duration*1e3||300)},100)},Animator.prototype.fadeIn=function(element,prefix,duration){var self=this;element.style.opacity=0,element.style[prefix+"Transition"]="opacity "+(duration||.3)+"s linear",setTimeout(function(){element.style.opacity=1,setTimeout(function(){element.style[prefix+"Transition"]=null,element.style.opacity=null,typeof self.callback=="function"&&self.callback()},duration*1e3||300)},100)},Animator.prototype.fadeOut=function(element,prefix,duration){var self=this;element.style[prefix+"Transition"]="opacity "+(duration||.3)+"s linear",setTimeout(function(){element.style.opacity=0,setTimeout(function(){element.style[prefix+"Transition"]=null,element.style.opacity=null,typeof self.callback=="function"&&self.callback()},duration*1e3||300)},100)},Animator})