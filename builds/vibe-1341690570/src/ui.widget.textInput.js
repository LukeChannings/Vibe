define(["util"],function(util){util.registerStylesheet("stylesheets/ui.widget.textInput.css");var UIWidgetTextInput=function(options){var options=options?options:{},textInput=this.element=util.createElement({tag:"div",customClass:"TextInputWidget",appendTo:options.appendTo||document.body}),input=util.createElement({tag:"input",appendTo:textInput,setAttributes:{type:"text"}}),clear=util.createElement({tag:"button",appendTo:textInput});self=this,typeof options.customClass=="string"&&util.addClass(textInput,options.customClass),options.placeholder&&("placeholder"in input?input.setAttribute("placeholder",options.placeholder):require(["model.placeholder"],function(Placeholder){new Placeholder(input,options.placeholder)})),util.addListener(input,"keydown",function(e){if(e.keyCode==13){var target=e.target||e.srcElement;return self.onenter(target.value),e.preventDefault?e.preventDefault():e.stopPropogation?e.stopPropogation():e.returnValue=!1,!1}}),util.addListener(input,"keyup",function(e){if(e.keyCode.toString().match(/(1(3|7|8)|91)/)||e.metaKey||e.ctrlKey)return;var target=e.target||e.srcElement;if(target.value.length>0){var key=String.fromCharCode(e.keyCode);e.shiftKey||(key=key.toLowerCase()),clear.style.display="block",options.oninput&&options.oninput(target.value)}else clear.style.display="none",self.onclear&&self.onclear(target.value)}),util.addListener(input,"focus",function(){util.addClass(textInput,"focus"),self.onfocus&&self.onfocus(target.value)}),util.addListener(input,"blur",function(){util.removeClass(textInput,"focus"),self.onblur&&self.onblur(target.value)}),util.addListener(clear,"click",function(){clear.style.display="none",input.value="",input.focus(),self.onclear&&self.onclear(target.value)})};return UIWidgetTextInput})