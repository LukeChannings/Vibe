define(["util"],function(util){function isValidDefinition(definition){return util.hasProperties(definition,["albumname","artistname","trackid","trackname"])?!0:!1}var PlaylistRow=function(definition){if(!isValidDefinition(definition))throw new Error("Invalid definition - "+definition);var self=this;this.id=definition.trackid;var row=this.node=util.createElement({tag:"li"}),columnContainer=this.columnContainer=util.createElement({tag:"ol",appendTo:row}),columns=this.columns={};for(var i in definition)if(definition.hasOwnProperty(i)){var column=document.createElement("li");util.disableUserSelect(column),column.innerHTML=i=="tracklength"?util.formatTime(definition[i]):definition[i],column.className=i,columns[i]=column}util.addListener(row,"dblclick",function(e){self.onplayitem&&self.onplayitem(e,self)})};return PlaylistRow.prototype.withColumns=function(columns){var self=this;return columns instanceof Array?(util.removeChildren(self.columnContainer),util.forEach(columns,function(columnName){self.columns[columnName]instanceof Element&&self.columnContainer.appendChild(self.columns[columnName])}),this):!1},PlaylistRow})