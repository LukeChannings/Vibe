define(["require","util","ui.widget.textInput"],function(require){var util=require("util"),TextInput=require("ui.widget.textInput"),UICollectionSearchBar=function(options){var options=this.options=options||{};if(!options.appendTo||!options.apiInstance)throw new Error("UICollectionSearchBar does not have required parameters.");var self=this,element=this.node=util.createElement({tag:"div",customClass:"search",appendTo:options.appendTo}),input=new TextInput({appendTo:element,placeholder:"Search the collection.",customClass:"UIWidgetSearchInput search",oninput:function(){self.input()},onclear:function(){self.clear()}})};return UICollectionSearchBar.prototype.input=function(query,key){var self=this;typeof window.timeout!="undefined"&&(clearTimeout(window.timeout),window.timeout=undefined),window.timeout=setTimeout(function(){window.timeout=undefined,self.options.apiInstance.search(query,function(results){results.length>0?self.options.onresult&&self.options.onresult(results):self.options.onnoresult&&self.options.onnoresult()})},270)},UICollectionSearchBar.prototype.clear=function(){clearTimeout(window.timeout),window.timeout=undefined,self.options.onclear&&self.options.onclear()},UICollectionSearchBar})