define(["require","util","lib/DragDealer"],function(require){var util=require("util"),DragDealer=require("lib/DragDealer"),UIPlayerSlider=function(options){var options=options||{},self=this,node=util.createElement({tag:"div",id:"UIPlayerSlider",appendTo:options.appendTo||document.body,children:[{tag:"li",customClass:"current_time"},{tag:"li",customClass:"slider"},{tag:"li",customClass:"total_time"}]}),slider=util.createElement({tag:"div",customClass:"dragdealer",appendTo:node.getElementsByTagName("li")[1]}),handle=util.createElement({tag:"div",customClass:"handle",appendTo:slider}),progress=util.createElement({tag:"div",customClass:"progress",appendTo:slider}),buffer=util.createElement({tag:"div",customClass:"buffer",appendTo:slider}),currentTime=this.currentTime=util.createElement({tag:"span",inner:"00:00",appendTo:node.getElementsByTagName("li")[0]}),totalTime=this.totalTime=util.createElement({tag:"span",inner:"00:00",appendTo:node.getElementsByTagName("li")[2]}),dragdealer=new DragDealer(slider,{slide:!1,speed:100,callback:options.onseek});this.updateProgress=function(position,time){dragdealer.setValue(position),position===0?progress.style.width=0:progress.style.width=handle.style.left,currentTime.innerHTML=util.formatTime(time)},this.updateBuffer=function(buffered){buffer.style.width=buffered+"%"},this.updateDuration=function(duration){totalTime.innerHTML=util.formatTime(duration)},this.disable=function(){dragdealer.disable()},this.enable=function(){dragdealer.enable()}};return UIPlayerSlider})