<!DOCTYPE html>
<html lang="en">
	<head>
		<title>RearrangeableList</title>
		<style>
*{
	margin: 0;
	padding: 0;
}

#UIPlaylist{
	width: 800px;
	height: 500px;
	border: 1px solid #333;
	overflow: auto;
}
		</style>
		<meta charset="utf-8" />
		<script src="../modules/dependencies/require.js" type="text/javascript"></script>
		<script type="text/javascript">
		
		require.config({baseUrl : '../modules'})
		
		require(['dependencies/domReady', 'util', 'UI/Widget/RearrangeableList/RearrangeableList', 'UI/Widget/ContextMenu/ContextMenu'], function(domReady, util, RearrangeableList, ContextMenu) {
		
			domReady(function() {

				function rowFactory(item) {
				
					var node = util.createElement({
						tag : 'li',
						inner : item
					})
					
					util.addListener(node, 'contextmenu', function(e) {
					
						new ContextMenu([{
							title : "Remove Item.",
							callback : function() {
								
								var target = e.target || e.srcElement,
									index = Array.prototype.indexOf.call(rearrangeableList.node.childNodes, target)
								
								if ( target.hasClass('selected') ) {
								
									rearrangeableList.removeNodes(rearrangeableList.selectedNodes)
								}
								else {
								
									rearrangeableList.removeNodesByIndex([index])
								}
							}
							}], e.clientX, e.clientY)
						
						if ( e.preventDefault ) e.preventDefault()
						
						return false
					})
					
					return node
				}

				var container = util.createElement({
					tag : 'div',
					customClass : 'container',
					appendTo : document.getElementById('UIPlaylist')
				})

				rearrangeableList = new RearrangeableList({
					appendTo : container
				})
				
				var items = []
				
				for ( var i = 0; i < 100; i++ ) {
				
					items.push('Item ' + (i + 1) )
				}
				
				rearrangeableList.addNodes(items.map(rowFactory))
			})
		})
	</script>
	</head>
	<body>
		<div id="UIPlaylist"></div>
	</body>
</html>