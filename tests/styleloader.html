<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Stylesheet loader</title>
		<meta charset="utf-8" />
		<script type="text/javascript">
if ( typeof Element.prototype.setAttributes == "undefined" )
{
	Element.prototype.setAttributes = function(attributes){
		
		var self = this;
			
		if ( attributes instanceof Array )
		{
			attributes.forEach(function(attribute){
				
				self.setAttribute(attribute[0],attribute[1]);
				
			});
		}
		else if ( typeof attributes == "object" )
		{
			for ( var i in attributes )
			{
				self.setAttribute(i,attributes[i]);
			}
		}
	}
}

var load = function(url, callback) {

	if ( ! window.registeredStylesheets ) window.registeredStylesheets = [];

	if ( window.registeredStylesheets.indexOf(url) == -1)
	{
		(document.head || document.getElementsByTagName("head")[0]).appendChild(function(){
		
			var link = document.createElement('link');
		
			link.setAttributes({
				'rel' : 'stylesheet',
				'type' : 'text/css',
				'title' : url,
				'href' : url
			});
		
			return link;
		
		}());
		
		if ( typeof callback == 'function' ) {
		
			(function checkLoaded() {
			
				for ( var i = 0; i < document.styleSheets.length; i++ ) {
				
					if ( new RegExp(url).test(document.styleSheets[i].href) ) {
					
						callback()
						
						return;
					
					}
					
				}
			
				setTimeout(checkLoaded, 1)
			
			})()
		
		}
		
		window.registeredStylesheets.push(url);
	}
}
		</script>
	</head>
	<body>
	</body>
</html>