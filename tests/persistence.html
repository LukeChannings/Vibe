<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Persistence test.</title>
		<meta charset="utf-8" />
		<script src="../modules/dependencies/require.js" type="text/javascript"></script>
		<script type="text/javascript">
		
			require.config({'baseUrl' : '../modules'});
		
			require(['dependencies/domReady','Model/Persistence','util'],function(domReady, Persistence, util){
			
				domReady(function(){
				
					persistence = new Persistence('test');
					
						var obj = persistence.load();
						
						if ( obj )
						{
							document.getElementsByTagName('h1')[0].innerHTML = obj.title;
						}
						
						var button = document.getElementsByTagName('button')[0];
						
						util.addListener(button,'click',function() {
						
							console.log('click');
						
							test = new Persistence('bob');
						
						});
				});
			});
		
		</script>
	</head>
	<body>
		<h1></h1>
		<button style="z-index: 1000;">Again.</button>
	</body>
</html>